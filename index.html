<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    :root {
      --main-color-white: #ffffff;
      --container-stroke: 10px;
    }
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background-color: #000000;
      color: var(--main-color-white)
    }

    /* Simple dark mode for all elements */
    html,
    body,
    input,
    button,
    select,
    textarea {
      background-color: #111 !important;
      color: var(--main-color-white) !important;
      border: 1px solid #444;
    }

    input,
    button,
    select,
    textarea {
      background-color: #222 !important;
      color: var(--main-color-white) !important;
      border-radius: 4px;
      border: 1px solid #444;
      padding: 4px 8px;
    }

    input:focus,
    button:focus,
    select:focus,
    textarea:focus {
      outline: 2px solid #00b3ff;
    }

    label {
      color: var(--main-color-white);
    }

    /* Ensure all text elements are white by default */
    *,
    *::before,
    *::after {
      color: var(--main-color-white);
      box-sizing: border-box;
    }



    #bucket-svg {
      display: block;
      margin: 0;
      padding: 0;
      width: 500px;
      height: auto;
    }

    #form-container {
      position: static;
      margin-top: 20px;
      color: var(--main-color);
    }

    #form {
      display: flex;
      align-items: center;
    }

    #input {
      width: 60px;
      margin-right: 10px;
    }
  </style>
</head>

<body>
  <div id="process-tunnel">
    <svg width="612pt" height="792pt" viewBox="0 0 612 792" overflow="visible" version="1.1" xmlns="http://www.w3.org/2000/svg">

      <path id="wave_1" 
          d="M23.90247,23.57277 C23.22755,30.23039 30.77475,37.77759 37.43237,37.10267 C44.08999,37.77759 51.63733,30.23039 50.96228,23.57277 C50.28736,30.23039 57.83456,37.77759 64.49231,37.10267 C71.14993,37.77759 78.69713,30.23039 78.02222,23.57277 C77.34717,30.23039 84.8945,37.77759 91.55212,37.10267 C98.20974,37.77759 105.7571,30.23039 105.082,23.57277 C104.4071,30.23039 111.9543,37.77759 118.6119,37.10267 C125.2695,37.77759 132.8169,30.23039 132.142,23.57277 C131.467,30.23039 139.0143,37.77759 145.6719,37.10267 C152.3295,37.77759 159.8767,30.23039 159.2018,23.57277 C158.5269,30.23039 166.0741,37.77759 172.7318,37.10267 C179.3894,37.77759 186.9366,30.23039 186.2617,23.57277" 
          stroke="#0000FF" stroke-width="4" fill-opacity="0" />
      <path id="wave_2" 
          d="M427.1582,23.57277 C426.4833,30.23039 434.0305,37.77759 440.6881,37.10267 C447.3458,37.77759 454.8931,30.23039 454.218,23.57277 C453.5431,30.23039 461.0903,37.77759 467.7481,37.10267 C474.4057,37.77759 481.9529,30.23039 481.278,23.57277 C480.6029,30.23039 488.1503,37.77759 494.8079,37.10267 C501.4655,37.77759 509.0128,30.23039 508.3378,23.57277 C507.6629,30.23039 515.2101,37.77759 521.8677,37.10267 C528.5253,37.77759 536.0726,30.23039 535.3978,23.57277 C534.7228,30.23039 542.27,37.77759 548.9276,37.10267 C555.5853,37.77759 563.1324,30.23039 562.4575,23.57277 C561.7827,30.23039 569.3298,37.77759 575.9876,37.10267 C582.6452,37.77759 590.1924,30.23039 589.5175,23.57277" 
          stroke="#0000FF" stroke-width="4" fill-opacity="0" />
      <path id="container_inner" 
          d="M406.9955,4.630783 L427.1583,4.630783 L427.1583,194.4023 L186.2617,194.4023 L186.2617,4.630783 L206.4245,4.630783" 
          stroke="#FFFFFF" stroke-width="4" fill-opacity="0" />
      <path id="container_outter" 
          d="M3.739698,4.630783 L23.9025,4.630783 L23.9025,248.1697 L186.2617,248.1697 L427.1583,248.1697 L589.5175,248.1697 L589.5175,4.630783 L609.6803,4.630783" stroke="#FFFFFF" 
          stroke-width="4" fill-opacity="0" />
      <path id="arrow_1" 
          d="M188.4242,223.8254 L188.4242,213.586 L217.7771,213.586 L217.7771,207.101 L231.7709,218.7057 L217.7771,230.3103 L217.7771,223.8254 z" 
          stroke="#0000FF" stroke-width="4" fill-opacity="0" />
    </svg>
  </div>

  <div id="form-container">
    <form id="form">
      <label for="input">Set Height (0-99): </label>
      <input type="number" id="input" name="height_var" min="0" max="99" value="99">
      <button type="submit">Submit</button>
    </form>
  </div>
  <div id="form-container">
    <form id="form-2">
      <label for="input-2">Set Height 2 (0-99): </label>
      <input type="number" id="input-2" name="height_var-2" min="0" max="99" value="0">
      <button type="submit">Submit</button>
    </form>
  </div>
  <div id="form-container">
    <form id="speed-form">
      <label for="speed-input">Set speed (0-99): </label>
      <input type="number" id="speed-input" name="speed_var" min="0" max="99" value="50">
      <button type="submit">Submit</button>
    </form>
  </div> 
  <script>
    // Variable between 0 and 99
    let height_var = 0; // You can update this value dynamically as needed
    let height_var_2 = 0; // You can update this value dynamically as needed
    let speed_var = 50; // Default speed

    // Wait for SVG to load, then animate the wave
    const svgObject = document.getElementById('bucket-svg');
    svgObject.addEventListener('load', function () {
      const svgDoc = svgObject.contentDocument;
      const wave = svgDoc.getElementById('wave');
      const wave2 = svgDoc.getElementById('wave_2');
      const container = svgDoc.getElementById('container');
      const arrow1 = svgDoc.getElementById('arrow_1');
      if (wave && container) {
        // Get the top and bottom Y positions from the container path
        // container path: M219.5796,333.5186 L219.5796,514.6981 L340.3659,514.6981 L340.3659,333.5186
        const topY = 200;
        const bottomY = 0;

        let t = 0;
        let arrowOffset = 0;
        let arrowDirection = 1;
        let arrowAnimating = false;
        function animateWave() {
          // Animate the wave path's vertical position for a simple effect
          const amplitude = 5;
          const freq = 0.05;
          // Calculate vertical position based on height_var
          // When height_var=0, wave at bottom; when height_var=100, wave at top
          const yPos = bottomY - ((bottomY - topY) * (height_var / 100));
          // Add animation wiggle
          const animatedY = yPos + Math.sin(t * freq) * amplitude;
          wave.setAttribute('transform', `translate(0, ${animatedY - 23.57277})`); // 23.57277 is the original Y of wave

          // Animate wave_2 if present
          if (wave2) {
            const yPos2 = bottomY - ((bottomY - topY) * (height_var_2 / 100));
            const animatedY2 = yPos2 + Math.sin(t * freq) * amplitude;
            wave2.setAttribute('transform', `translate(0, ${animatedY2 - 23.57277})`); // 23.57277 is the original Y of wave_2
          }

          // Animate arrow_1
          if (arrow1) {
            if (!arrowAnimating) {
              arrowAnimating = true;
              arrowOffset = 0;
              arrowDirection = 1;
            }
            // Map speed_var (0-99) to a pixel increment (0 = 0, 99 = 10)
            let arrowSpeed = (speed_var / 99) * 10; // 0 to 10 px per frame
            if (speed_var === 0) arrowSpeed = 0;
            arrowOffset += arrowSpeed * arrowDirection;
            if (arrowOffset >= 100) {
              arrowOffset = 0;
            }
            arrow1.setAttribute('transform', `translate(${arrowOffset}, 0)`);
          }

          t++;
          requestAnimationFrame(animateWave);
        }
        animateWave();
      }
    });

    // Handle form submission
    document.getElementById('form').addEventListener('submit', function(e) {
      e.preventDefault();
      const input = document.getElementById('input');
      let val = parseInt(input.value, 10);
      if (isNaN(val)) val = 0;
      if (val < 0) val = 0;
      if (val > 99) val = 99;
      height_var = val;
    });
    document.getElementById('form-2').addEventListener('submit', function(e) {
      e.preventDefault();
      const input = document.getElementById('input-2');
      let val = parseInt(input.value, 10);
      if (isNaN(val)) val = 0;
      if (val < 0) val = 0;
      if (val > 99) val = 99;
      height_var_2 = val;
    });
    document.getElementById('speed-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const input = document.getElementById('speed-input');
      let val = parseInt(input.value, 10);
      if (isNaN(val)) val = 0;
      if (val < 0) val = 0;
      if (val > 99) val = 99;
      speed_var = val;
    });
  </script>
</body>

</html>